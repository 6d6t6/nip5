<!doctype html>
<html>
<body>
  <h2>NIP-05 Registration</h2>

  <form id="reg">
    <input name="name" placeholder="name" required>
    <input name="npub" placeholder="npub..." required size="60">
    <button>Register</button>
  </form>

  <pre id="out"></pre>

<script>
document.getElementById("reg").onsubmit = async (e) => {
  e.preventDefault()
  const form = new FormData(e.target)

  const res = await fetch("https://nip5.dooot.workers.dev/register", {
    method: "POST",
    body: JSON.stringify({
      name: form.get("name"),
      npub: form.get("npub")
    })
  })

  document.getElementById("out").textContent = await res.text()
}
</script>
</body>
</html>